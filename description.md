# Idea a for a sequel of a famous sci-fi game

This is a fan-made open source game ispired by Stelaris (typo is for the copyright). It's been written with this concept in mind: a game that "feels" like Stellaris but has different, more realistic, gameplay.

Notable features:
- with pops, we consider their actual number and a mathematically correct distribution to model natality and mortality
- habitability calculated on gravity, atmosphere and temperature of a planet, making ANY planet (potentially) habitable, with the correct technologies
- jobs and districts have designs.
- space structures, even the smallest, are treated as "planets", with an habitability value, population and districts. At the beginning of the game, there are only small space structures, supporting only one small district each. In more advanced phases, space structures may become bigger, and start to support many districts, becoming *de facto* megastructures.
- no more civics, but factions are enhanced with variable characteristics, giving to their followers different bonuses
- researches selection modified 
- bonuses (or modules, districts, features, etc.) granted by technologies are generated at random
- events and technologies description generated by a Large Language Model
- characters with diplomacy, strategy, organization, intrigue and knowledge, (CK-like), more numerous and with many more positions. In each position, the characteristics have different effects.
- modified ship desing, warfare and diplomacy


## 1 - Pops

The pops are managed by large groups. With "group", we mean a set of pops all with the same:
- **job**
- **faction**
- **specie**

A group is characterized by a "quantity" value, that represents how many pops are present in the group. This number represents the ACTUAL number of individuals in the group (so likely millions).

A group is characterized by a value of happiness, that is the same for all the individuals in the group. Happiness and amenities works like in the current game.

At each month, a group produces an amount of resources, defined by its job:
> **resources = job production * quantity * adulthood percentage**

At each month, a group consumes an amount of resources, defined by its job:
> **resources = job upkeep * quantity * adulthood percentage**

It also consumes an amount of food equal to its quantity, and a quantity of consumer good defined by the living standards.

At each month, the quantity of each group is increased by a value, representing the population growth:
> **delta = natality - mortality + immigration**

Explaination of the members of this formula:
- **natality**: calculated as the specie natality divided by the specie lifespan (in months), multiplied by the quantity of the group and the adulthood percentage; it represents the average number of sons that individuals in a group have in a month.
- **mortality**: calculated as the quantity divided by the specie lifespan (in months) it represents the average number of individuals dying in a month.
- **immigration**: represent the quantity of individuals immigrating/emigrating to/from the planet, basing on a list of factors (if positive, immigration, if negative, emigration).

*Note: to determine natality and mortality we might actually sample a number from a gaussian with the correct mean and variance, instead of taking the average*

### 1.1 - Species

Each specie is characterized by:
- **base natality**: average number of children per individual (not by female individual, by any individual)
- **lifespan**: lifespan in standard years
- **adulthood**: standard years and individual takes to reach adulthood (and work and reproduce)
- **traits**: a list of bonuses or penalities to various aspects
- **homeworld**: refers to a planet, the homeworld
    - *optimal g*: the optimal gravity (in g) for the specie, by default the homeworld g.
    - *optimal temperature*: the optimal temperature (in K) for the specie, by deafult the homeworld average temperature
    - *supported atmosphere*: the atmosphere the specie can breath, by default the homeworld atmosphere

    these three values start fitting the homeworld, but genetic and/or cybernetic technologies can modify them, to adapt the specie to other planets.

We make the assumption that the distribution of the probability for a single individual to die each month is bernoullian (p = 1 divided by the lifespan in months)

**Definition:** *adulthood percentage*, represents the percentage of individuals in a population that are adult (so able to reproduce and produce). It is calculated as 
1 divided by the lifespan in months, raised to the adulthood in months.

### 1.2 - Jobs

Each job is characterized by:
- **production**: a set of resources produced each month
- **upkeep**: a set of resources consumed each month

*Note: the resources are the same of the first version of the game, with the exception of research power, that is only of one kind*

These values express the production and unpkeep for a SINGLE INDIVIDUAL, the actual production will be multiplied for the quantity of pop groups.

Each job is associated to a set of tech modules, creating a job-desing, composed of:
- **primary tech module:** the primary technology that is used to perform the job. It defines the base production and upkeep. Each job-design can have only one of these active at a time.
- **support tech modules:** some other technologies useful for the job. It provides bonuses to production, upkeep and other side effects. Each job-design can have no more than three of these active at a time.

Each primary tech-module can be given only to designs for a specific job, while some support tech modules can be given to more than one job.

Example of job-design, for the miner job:
- primary tech module: portable laser drills, production 5 minerals, upkeep 0.5 energy
- support tech modules:
    - short-range geo-scans: +15% bonus to mineral production
    - support mining drones: +20% bonus to mineral production, +15% upkeep

So each job associated to this design will produce 6,75 units of mineral, consuming 0,575 energy units.

Example of basic jobs:
|name   |description    |tier   |
|---    |--             |--     |
|miner  |produces minerals|1    |
|farmer |produces food|1        |
|technician|produces energy|1   |
|solider|produces stability, compose armies| 1 |
|builder|produces nothing, make construction of districts go on|1   |
|space builder|produces nothing, make construction of space structures go on|1    |
|artisan|produces consumer goods, consumes minerals|2   |
|metallurgist|produces alloys, consumes minerals|2      |
|chemist|produces strategic resources, consumes minerals|2  |
|researcher|produces research, consumes various resources|2 |
|entertainer|produces amenities, consumes consumer goods| 2 |
|administrator or priest| produces unity, consumes consumer goods|2 |
|trader|produces trade value, consumes consumer goods|          2   |
|ruler|produces unit, consumes consumes consumer goods|3    |

## 2 - Empires

### 2.1 - Government Positions

There many characters, and various government positions, that have empire-wide effects basing on their characteristics. 
- **ruler**: different effects based on government form
- **interior minister**: stability increase according to organization char.
- **foreign minister**: relations with empires improved according to diplomacy char.
- **defence minister**: fleet limit increased according to strategy char.
- **head of intelligence**: intelligence power increased according to intrigue char.
- **head of research**: research speed increased according to kwoledge char.

Productive positions:
- **minister of extraction**: agricoltural, energetic, mineral districts upkeep reduced and jobs increased according to organization char.
- **minister of production**: foundry, chemical, industrial district upkeep reduced and jobs inceased according to organization char.
- **minister of trade**: trade increased according to organization char.

### 2.2 - Government form and Factions

The government forms of the game are:
- Democratic: reduced attrition between factions; rulers are elected by all the people, according to their faction.
- Oligarcic: increased political power of tier 2 and tier 3 jobs; rulers are elected by tier 3 pops, according to their faction.
- Dictatorial: increased political power of tier 3 jobs; rulers are chosen by leaders, according to their faction.
- Imperial: increased political power of tier 3 jobs; the current ruler decides his heir.

Each empire has factions (usually more than one, I hope). Each faction is associated to two levels of ethics: one fanatic ethic or two non opposite moderate ethics. Each faction is characterized by some (two or three) values. Each value grant bonuses to pops and characters that follow the faction, but not all values can be picked by all the ethics.

Examples of values (note: effects on pops only affect pops of the faction):

|Name|Requisites|Effects|
|----|----|----|
|freedom|egalitarian|pops have happiness increased|
|gerarchy|authoritarian|jobs of tier 2 and 3 produce extra unity|
|diversity|xenophile|immigration from other empires increased if main faction|
|purity|xenophobe|pops have happiness increased if live on planets with only one (their) specie (slaves do not count)|
|warmongering|militarist|pops produce armies with increased morale|
|tranquility|pacifist|pops produce less crime|
|rationalism|materialist|increased research production from researchers pops|
|divine right|spiritualist|increased stability on planets where the faction is in the majority|
|colonialism|none|pops migrate to newly settled planets easilier|

These are just a few examples.

An empire may have various factions between its pops. The "main faction" is the one of the ruler. Some values may add extra effects if the faction is the main faction.

### 2.3 - Laws and Traditions

Laws represents mechanics, bonuses et cetera (correspond to policies and decrees in current game). Some laws can be passed only if the main faction has some requisites (example: purging laws only for xenophobe factions) and some unity is required for it. The price in unity depends on the number of pops in the Empire and their ethic: pops whose ethic or faction does not like the law that is being passed will increase the price, pops whose ethic or faction does like the law will decrease the price. If the number of pops that likes the law is large enough, the price can actually go negative, making the empire actually gain unity by passing such law.

Similarly, traditions represents changes in the culture and the society. Each tradition has some requisites, and the price in unity for gaining it increases if the empire has already many traditions, as well as increasing if there are a lot of pops in the empire that are against the tradition. 

## 3 - Planets

Each rocky (not gaseous) planet is characterized by:
- **Surface**: surface of the planet (aka number of districs available).
- **Gravity**: gravity of the planet, in g
- **Atmosphere**: atmosphere of the planet (some options from reality)
- **Temperature**: average temperature of the surface (in K).
- **Biosphere**: boolean, if the planet has lifeforms

Types of atmosphere: oxygen-nitrogen, oxygen, nitrogen, carbon dioxide, methan, ammonia, sulfur, no atmosphere.

### 3.1 - Habitability

A planet can be colonized by a specie only if it has an habitability high enough for that specie to prosper. As explained below, a low habitability decreases the natality and increases the mortality, so if the habitability is low enough, it can actually make the population rapidly decrease.

On each planet, for each specie, the habitability is calculated as:
$$\frac{g + a + t}{3}$$
Where:
- **g**: represents how well the specie is able to adapt to the planet gravity, and is defined as a gaussian function with average equal to the specie optimal gravity and variance equal to 1/4, with the gravity of the planet as x (multiplied by 100 to make it a percentage).
- **a**: represents how well the specie is able breath the atmosphere of the planet, and is defined as 100 if the planet is specie's homeworld, 75 if it has an atmosphere of the same type (the idea is that probably the atmopshere is similar but not perfect), 25 if it has an atmosphere of another type, 0 if the planet has no atmosphere
- **t**: represents how well the specie is able to adapt to the planet temperature, and is defined as a gaussian function with average equal to the specie optimal temperature and variance equal to 125, with the temperature of the planet as x (multiplied by 100 to make it a percentage).

Note how these values always result as valid percentages (between 0 and 100), and that the more similar a planet is to the specie's homeworld, the closer this value will be to 100%. Some examples, considering a human-like specie, adapted to live in a planet that has 1-g gravity, oxygen-nitrogen atmosphere and a 290 K average temperature:

- an iced planet, with 1.2 g, pure oxygen atmosphere, 265 K as average temperature, according to the formulas, would have g = 92%, a = 25%, t = 8%, leading to a 41% habitability.
- a cold desert planet (Mars), with 0.37 g, carbon-dyoxide atmosphere, 210 K as average temperature, according to the formulas, would have g = 45%, a = 25%, t = 0%, leading to a 23% habitability.
- a hot world, filled with dense jungles of fungi-like lifeforms, with 0.8 g, oxygen-nitrogen atmosphere, 300 K as average temperature, would have g = 92%, a = 75%, t = 67%, leading to a 78% habitability.
- an asteroid, with almost no gravity nor atmosphere, exposed to the coldness of the void (3 K), would have an habitability close to 0 %

Terraforming operations can change only the atmosphere and the average temperature, to make the planet more suitable for a specie.

*Note: theoretically, some planets with low g and/or high temperature cannot retain some types of atmosphere due to low escape speed. Consider implementing this? Or it would be overcomplicating?*

Each empire has three tech-modules that can increase the habitability:
- **gravity management modules**: increase g value
- **breathing support modules**: increase a value
- **termical isolation modules**: increase t value

Note that for none of these modules can increase a value over 100. Only one of each tech-module can be active at a time. Each of these technologies has an upkeep for each pop living in a planet with non 100% habitability. This upkeep is higher on lower habitability planets

If a specie is living on a planet that is not at 100% habitability, it will suffer some disadvantages. For each percentage point under 100%:
- +1% amenities consumed
- -0.33% to natality, +0.33% to mortality

So for example, in the 41% habitability iced planet of the previous example, each individual would have an amenities consumption increased by 59%, a natality decreased by 19,5% and a mortality increased by the same value. 
 
### 3.2 - Districts

Districts main purpose is to provide jobs and housing, spending a monthly upkeep. These structures does not directly correspond to the districts of the current game, they are smaller: a planet should be able to have a number of districts ranging from 20 for smaller ones, 50 or more for the greatest ones. 

Each district is associated to a district-design, composed of various tech-modules:
- **primary technology**: defines the amount and kind(s) of jobs that the district provides. For each type of job available, the district-design is associated to a job-design
- **housing technology**: tech-module that defines the base housing
- **support technologies**: up to five technology that provides various bonuses (extra jobs, housing, reduced upkeep, bonuses to planet/empire).

Primary technology tech-modules can be given only in a single type of districts, housing and support tech-modules may be given to different ones.

Example of district-design for a mining district:
- primary technology: strategic strip mining, provides 500M miner jobs and 50M clerk jobs.
- housing tech: meta-concrete complexes: provides 400M housing
- support technologies:
    - geo-search algorithms: district upkeep reduced by 15%
    - laboratories for geological research: provides 25M researcher jobs, increases the probability of breakthrough for geological researchs.


The district-design used determines the upkeep, the price and time used to build it. While a district is being built, it provides an amount of builder jobs. The more builders are used, the faster the construction will go on.

Types of districts:
|name           |general description|
|--             |--             |
|mining         |provides miner jobs|
|agricultural   |provides farmer jobs|
|energetic      |provides technician jobs|
|factory        |provides artisan jobs|
|foundry        |provides metallurgist jobs|
|chemical       |provides chemist jobs|
|city           |provides a great amount of housing, having some exclusive housing tech-modules. It also has different kinds of primary technology modules, available from the start of the game:<ul><li>*urban*: provides clerk jobs</li><li>*administrative/ecclesiastical*: provides clerk and administrator/priest</li><li>*scientific*: provides clercks and researchers</li><li>*trade*: provides clercks and traders</li><li>*mixed*: combination of two or more of the ones above</li></ul>|
|capital        |provides ruler and clerk jobs|

Different district desings may allow some districts to be built only on planets with specific features.

### 3.3 - Infrastructures

Infrastructures that provides support to the whole planet. Each planet can support a maximum number of infrastructure proportional to its surface.

Examples of infrastractures:

|name|description|
|-- |-- |
|sub-orbital transports|increased trade value|
|warehouses|increased storage|
|planetary shields|increased bombardment resistance|
|turrets|increased damages of defense armies|
|bunkers|protects a number of pops from bombardments|

Some infrastructures can be built many times, and their effects stack. Other can be built only once per planet.

### 3.4 - Resources between planets

A planet that does not produces all the resources it needs to pay its upkeeps, needs a safe route (no hostile ships, see below) to a planet that produces such resources, to import them. If this does not happen, the planet will have its production reduced or completely halted.

Each planet has its own resource storage. To build a district or infrastructure on a planet, the planet must have the resources needed for it. To make the districts of the planet work, the planet must be able to pay every moth the upkeep. This can be done with reources produced by (or stored in) the planet or with imported resources.

A planet that does not consume its whole production can export it to other planets. The player can define how much of the production of a planet to export to which other planet (connected with a safe ruote). This has a monthly upkeep in trade value that increases with quantity of resources and distance.

If a planet (or more than one) is cut loose from the others (no more safe routes) it will have to rely only on its own stored resources. If a planet is not able to provide enough resources for the upkeep of a district (and its jobs), the jobs available will decrease accordingly (or even disappear if the resources are completely absent). If the planet hasn't enough consumer goods for its population (according to the living standards) there will be a drop in happiness; if the planet hasn't enough food for its population, they will starve, causing a great increase in mortality and a drop in stability.

An empire can decide if its ships with offensive potential, in hostile territory, block the trade routes:
- *No block*: the ships does not block any trade route.
- *Only basic resources*: the ships block the import/export of all resources except energy, food and minerals.
- *Only food*: the ships block the import/export of all resources except food.
- *Total block*: the ships make a trade route completely blocked.

An empire can make its import/export trade routes from one planet to another pass through the territory of a non-hostile empire, if such empire allows it, paying a tax in trade values to that empire.

### 3.5 - Space structures

Functionally, space stations works like small planets, with an abitability, providing districts.

Each empire has a set of tech-modules that defines the characteristic of habitability of space structures:
- **gravity modulation module**: defines a range of gravity values that can be found inside space structures. If the optimal gravity value for a specie is inside this range, that specie considers all space structures of the empire with optimal g value. Else, the g value is calculated using the value of the range closest to the optimal one.
- **atmospheric composition module**: defines the atmosphere(s) that can be found inside space structures. Should probably be the easiest to get. If the optimal atmosphere for a specie is between these, the a value will range from 75 to 100% (different tech-modules provide different values). Else, the a value will be 25% as usual.
- **temperature modulation module**: defines a range of temperature values that can be found inside space structures. Like gravity, if the optimal temperature value for a specie is inside this range, that specie considers all space structures of the empire with optimal t value. Else, the t value is calculated using the value of the range closest to the optimal one.

The idea here is that an empire is not able to modify such values on a planet without using really expensive terraforming technologies, but is able, instead, to create some small envoironments inside a space structure with optimal habitability values for one or more species.

On the other hand, even if a spacestructure is easier to colonize, at the beginning of the game they support one small district each. A basic space structure is used to exploit resources of a star, an asteroid or a gaseous planet, that are bodies where a standard colony can't be built, or to create a shipyard. The type of resources available defines the type of district that can be built.

Types of space districts:
|name|description|
|----|----|
|extraction|provides miner jobs, mining the resources of the celestial body|
|energetic|provides technician jobs, collecting energy from a star|
|research|provides researcher jobs, studying the celestial bodies|
|shipyard|provides space builder jobs, building ships|
|military|provides soldier jobs and turrets|

These districts provide less jobs and housing, with respect to their corresponding version of regular district. Their designs have support modules, like the regular ones. Some of these support modules should provide entertainers or amenities.

All space structure in a system will be considered a single planet for what concerns immigration, emigration, job shifts, amenities et cetera.

Technologies should gradually unlock tech-modules that allow the player to expand and upgrade space structures, making them support more space districts and also regular districts and infrastructures, slowly turning them in *de facto* megastructures.

## 4 - Leaders

Each empire has many more leaders with respect to the current game, and they are more close to CK-styled characters. They do not have a specific job or a level, each leader can be employed in any position. They have five characteristics that define how good the leader is in a position:
- **Diplomacy**, defines how good the leader is at intercacting with others, used by envoys.
- **Strategy**, defines how good the leader is at warfare
- **Organization**, defines how good the leader is at managing resources and money
- **Intrigue**, defines how good the leader is at intelligence, espionage and counter-espionage
- **Knowledge**, defines how good the leader is with science

Each leader also has a set of traits that defines its personality. Some events, options et cetera will be available only for leaders with some specific traits.

Each leader has an ethic and a faction, and a loyalty value according to them, that expresses how happy the leader is to serve the empire. A leader with low loyalty may betray its empire or try to start a rebellion to form a new one. 

### 4.1 - Positions

In addition to the ones described in the paragraph about government, there are other positions:
- **envoys**: one for each foreign empire, they manage foreign relationships
- **commanders**: lead fleets, each fleet has one
- **planet governors**: govern planets, each planet has one
- **spies**: manage espionage missions
- **project leaders**: each innovation or reverse engineering project has one, as well as each tech-module developing project and fleet sent to explore unknown systems.

A leader that has been given a position and then dismissed will not disappear, and will still be available in the leaders list, ready to be employed again in another position.

### 4.2 - Missions

Each of the positions previously defined has a class of missions and actions associated. Each mission described here starts an event chain.

Envoys can be given missions about the empire they interact with, to improve relationships or get treaties, alliances et cetera. The higher their diplomacy value, the higher will be the chance of success for such missions.

Commanders simply improve the performances of their fleet according to their strategy value. They are employed during warfare.

Planet governors provide static bonuses to their planet according to their organization value. They are elected by the pops of the planet if the government form allows it. They can be given missions to resolve crises on their planets (high crime rate, instability, shortages, et cetera), they have better chances of success according to their organization value.

Spies are given missions that target another empire or the empire of the leader. They are missions to discover informations, sabotage districts, ships and space structures, steal technologies, kill or corrupt leaders, et cetera, in the first case; missions to discover traitors, prevent enemy espionage missions, lower crime, increase stability et cetera, in the second case. A high intrigue value increases the chances of success.

Project leaders improve the breakthrough chances in the task (innovating, reverse-engineering, developing, exploring systems) they are given according to their knowledge value.

In general, a high (or low) value in a characteristic that is not the main one in a mission and also some traits may improve (or worsen) the chances of success or trigger side events in the event chain, providing bonunes or penalties.

## 5 - Techonologies

Technologies provide tech-modules, and are partailly random generated at runtime, as described below. Their names and descriptions are generated by a Large Language Model.

Each tech-module is associated to a series of labels, expressing the field that the technology is improving.

Examples of labels: job, support, district, habitability, space structure, mining, agriculture, energy production, metallurgy, et cetera.

Each technology provide a tech-module that gives a bonus to an empire using it. Some tech-modules are mutually exclusive (those who have similar effects, to prevent stacking), and an empire can only use one at a time.

### 5.1 - Research Selection

Each empire starts the game with a set of basic technologies. It can discover new ones in three ways:
- **mind storming**: an empire can dedicate a proportion of its produced research to mind storming. While doing this, each month the empire has a chance to receive an event that allows it to start developing a new technology. An empire should always be doing this.
- **innovating**: an empire can select one technology it already has to innovate. And dedicate a proportion of its produced research to it. While doing this, each month it has a chance to receive an event that allows it to start developing an improved version of the technologies it's innovating.
- **reverse engineering**: an empire can select one tech-module present in its territory that hasn't researched yet (it has captured ships or conquested planets of an enemy empire, it has found ancient technologies, et cetera) and dedicate a proportion of its produced research to it. While doing this, each month it has a chance to receive an event that allows it to start developing the technology it's reverse engineering.

The event announces that the scientists have made a breakthrough, and that they are ready to dedicate energies to develop what they have found in a tech-module that the empire will be able to use. The chance for the event to happen depends on the size of the empire and on the amount of research that it's using to mind storming, innovating or reverse engineering.

Note that an empire can innovate or reverse engineer more than a tech-module at a time.

The event also shows the characteristics that the new tech-module will have. For reverse engineering, the tech-module is already defined, but for the other two, the characteristics are generated at random. While innovating, the characteristics will be improved with respect to the current tech-module. While mind storming, the kind of the tech-module (primary, support, weapon, et cetera) will be determined at random, and its characteristics in different ways according to their nature:
- primary technologies tech-modules usually look at the best primary technology already existing for that job (or district or whatever) and improve its main characteristic (resources produced for jobs, jobs provided for districts, et cetera).
- support techonologies tech-modules look at already existing support tech-modules, pick one and improve their bonuses/effects, add some extra resource production (or jobs for the districts) et cetera.
- modules for ships like weapons and armors have their stats generally improved.
- some technologies unlocking special features may pop up randomly.

Some randomly generated traits in a tech-module may have a really reduced probability of showing up unless some pre-defined condition is fullfilled. For example, let's say there's a tech-module that enables an empire to uplift species: it will have a really reduced chance of showing up if the empire doesn't have discovered at least, let's say, three or more tech-modules with label "genetic".

This randomization makes every technology advancement unique, and make each empire have its own set of unique tech-modules, that can be used, sold, shared, stolen, recovered, et cetera.

### 5.2 - Tech-modules development

After the breakthrough, an empire can dedicate a proportion of research power to developing the new tech-module. Each month, there's a chance for an event to show up and grant the tech-module. The chance is based on the amount of research power employed and on the size of the Empire.

The name and the description of the tech-module are generated in this moment by a large language model, that is given:
- labels of the technology
- characteristics of the tech-module

And also two or three examples of tech-modules with similar labels (possibly from the same empire), providing to the model characteristics, name and descriptions (few shot).

*Note: Is it possible to find a way to implement this locally, with a LLM being no more than 10GB? Or it needs a server?*

*Note: the user may be allowed to modify name and description of tech-module, after their generation*

After developing a tech-module, it can be used in designs. Update the instances of a design that has been given a new tech-module costs resources. 

## 6 - Ships, warfare and Diplomacy

### 6.1 - Ship modules

There are no science ships, construction ships and war ships, just ships, that uses different modules.

Each ship is built according to a complex design. The most basic element of the design is the **schema**. Schemas are special tech-modules that allow an empire to build a wide class of ships. Each schema defines the **parts** that compose the ship.

Types of parts:
- **bow**: goes in front of the ship
- **stern**: goes in the back of the ship
- **core**: goes in the middle of the ship
- **wing**: goes in the lateral part of a ship

A schema is made of a combination of these parts. Each schema (i.e. the parts that compose it and its positions) is determined randomly, like almost all the other tech-modules.

Examples of schemas:
- *basic*: in posses of all empires at the start of the game, made only of stern and bow.
- *sword*: made of stern, two cores and bow, in a row. The core closest to the stern has two wings on the sides.
- *longbow*: made of four cores in a triangle (three in a horizontal row, then one in the front middle), three sterns (one for each core of the horizontal row), a bow (in the middle, front), four wings (two on the sides of the horizontal row of cores, two on the sides of the front core).

The tech-modules that unlock parts define first its type and than the number of tech-modules that can be mounted on that part. 

All the parts contains these tech-modules:
- **hull module**: defines the hull points of the part. All the parts sums their hull points to determine the hull points of the whole ship.
- **power module**: the power generated by all parts sums to define the max power of the ship.

All the parts have some defensive tech-modules, that can be filled with:
- **armor module**: defines the armor points of the part. All the parts sums their armor to determine the armor points of the whole ship.
- **shield module**: defines the shield points of the part. All the parts sums their shields to determine the shield points of the whole ship.

Stern parts have some **propulsion tech-modules**, defining the ship speed.

All the parts have a variable number of active tech-modules, that can be:
- **weapon module**: provide offensive power, defined by type (kinetic, explosive, energy), range, damage, tracking et cetera.
- **bombardment module**: provide bombardment power.
- **hangar module**: provide offensive power by small space-crafts.
- **turret module**: provide offensive-defensive power, by shooting down incoming projectiles and small space-crafts.
- **landing module**: can hold armies and land them on planets, defined by the number of soldiers it can hold.
- **construction modules**: allow the construction of space structures, defined by the number of space builders on board.
- **research modules**: allow the exploration and research of celestial bodies, defined by the number of researchers on board.
- **colonization modules**: allow colonization of planets, defined by the number of individuals it can transport.

Some parts can also have **auxiliary modules** giving various bonuses.

Examples of parts (whose modules are determined at random when the tech-module is defined):
- Bow part that provides two defensive modules, two weapon modules and a hangar module
- Stern part that provides two defensive modules, one weapon module, one turret module, one auxiliary module
- Bow part that provides two defensive modules, two construction modules, one auxiliary module
- Bow part that provides two defensive modules, two research modules, one auxiliary module
- Core part that provides two defensive modules, two colonization modules.
- Core part that provides two defensive modules, two landing modules, one bombardment module.

All the various modules can be filled with different tech-modules. This means that empires can create ships with research modules and weapons, ships with invasion technologies and weapons, ships with construction modules and colonization modules.

### 6.2 - Armies and land warfare

In a war, fleets can figth other fleets, as long as at least one has some form of offensive power. After a fight, the victorius fleet takes a small part of the crews of destroyed ships as prisoners (survivors).

If a fleet enters an orbit of an enemy planet and has landing modules, it can land the armies and start an invasion. At the beginning of the invasion, the player will be asked strategy, objective and (optionally) target:

**Strategies**:
- *Concentration*: all the armies will be landed in a single district and they will start the invasion from there. Useful for rapid attacks if there's a specific target.
- *Distribution*: the armies will be equally divided and landed in three or more districts.

**Objective**:
- *Conquest*: the objective of the troops is the conquest of the planet, obtained after the conquest of all districts or the surrender.
- *Destruction*: the objective of the troops is destroying as many districts as possible. The troops will deal extra damage to districts.

**Target**: optionally, the player can specify a type of district to attack, and the troops will focus on conquest/destruct it. Useful to damage the production of a specific resource of the enemy.

The troops that are landed will fight against the ones that defend the planet. Each district has a maximum number of troops that can fight in it at the same time for each side. If one side defeats another in a district, that side conquers the district and takes some of the soldiers of the enemy armies as prisoners.

If there a fleet in orbit (usually the one that has landed the troops, but potentially reinforcements from the invaded empire) that has bombardment modules, it can deal damage to districts (and potentially its population) occupied by enemies and/or to the armies in them.

In a conquered district, the conquering empire will deal damage to it if the objective is destruction, steal the resources produced if the objective is conquest and there's a safe route to its territory. The conquering empire can have the following attitudes towards the population and the soldiers taken as prisoners:
- *occupation*: the population has a happiness penalty, produces resources as usual. Prisoners have to be fed.
- *deporation*: the population and the prisoners have a great happiness penalty, they are deported as slaves to a planet of the conquering empire, as long as there's a safe route.
- *purge*: the population and prisoners have enourmous happiness penalty, they are purged.

Potentially, more than one empire can land armies on the same planet (even if fleets will likely fight, if they are enemies). If the empires that are invading a planet are allied, they will cooperate, if they are enemies they will fight, if they are neutral they could cooperate or fight, according to various factors.

Invanding armies can retreat before accomplishing the objective if there's a fleet with landing modules large enough in orbit. They will suffer morale penalties. If the invanding armies lose all the districts on a planet, they will be forced to retreat. If during a retreat there's not enough room on the fleet, the troops in excess will be left on the planet as prisoners.

Each army is defined by a desing and the number of unities in it. Each design is composed by the following tech-modules:
- **primary tech-module**: defines the nature of the soldiers of the army, their type (infantry, vehicles, aircraft), the number of soldiers for each unity (will be devolved from planet population when the army is created), the morale of each unity, the morale damage dealt to enemies, potentially some bonuses.
- **primary weapon**: defines the damage dealt to enemies.
- **primary defense**: defines HP.
- **auxiliary tech-modules**: up to three, define various bonuses.

### 6.3 - Peace treaties

In any moment of a war, the envoy(s) can negotiate a peace, sending requests to the enemy empire(s). The terms and conditions of requests are dynamical, and a request has different chances of beign accepted according to its content:

Examples of conditions:
| condition | description | acceptance |
|----|----|----|
|transfert of planet(s)|planet transfered to another empire| more likely to be accepted if the planet has been occupied by the receiving empire. Some casus belli improve the acceptance for the attacker (claims)|
|restitution of prisoner|one empire returns the prisoners to another| improves the attitude of the part that is receiving back its soldiers.|
|restitution of deported population|one empire returns the deported population|greatly improves the attitude of the part that is receiving back its population. Xenophobe/slavist empires are less likely to accept to do this.|
|transfert of resource|one empire devolves some of its resources to another|improves the attitude of the receiving empire|
|Vassallization|one empire is vassalized to another|Not likely to be accepted, in general. Some casus belli (submission) improve the acceptance|
|Government reformation|One empire forces another to reform its government, putting another faction to the power|Not likely to be accepted, in general.|

Things that increases the chances of a request being accepted:
- *high diplomacy score*: the higher the diplomacy of the envoy, the higher the chances of a request being accepted.
- *high attrition*: an empire that has high attrition is more likely to accept a request.
- *unable to defend*: an empire that's unable to defend itself (fleet and/or shipyards destroyed) is more likely to accept a request.

After sending a request, the enemy empire will answer, starting a chain event where negotiations happen. The enemy empire may refuse negotiations from the start, or may propose some changes in the terms. A temporary truce may be signed while negotiations are in place. If the envoy of the enemy empire is skilled, it may be impossible to refuse his requests unless paying a price in unity.

At some point the empires will agree, sign the truce and enforce the terms of the peace treaty.

## 7 - Events

All the events (results of missions, breakthrough, anomalies, problems et cetera) should be defined by their effects and a brief description of what is happening. The actual description of the event (the text displayed by pop-ups) will be generated by the same LLM that generates the tech-module descriptions. Variable names (planet names, empire names, character names, et cetera) may be defined by special tokens.